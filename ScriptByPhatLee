local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Load rule tá»« file local
local rules = loadfile("rules.lua")()

local function getPetInfo(ui)
    local name = ui:FindFirstChild("PetName", true) and ui.PetName.Text or ""
    local kg = ui:FindFirstChild("PetKg", true) and tonumber(ui.PetKg.Text:match("%d+")) or nil
    local age = ui:FindFirstChild("PetAge", true) and tonumber(ui:FindFirstChild("PetAge", true).Text:match("%d+")) or nil
    return name, kg, age
end

while task.wait(0.1) do
    local giftUI = playerGui:FindFirstChild("Gift_Notification", true)
    if giftUI then
        local acceptBtn = giftUI:FindFirstChild("Accept", true)
        if acceptBtn and acceptBtn.Visible and acceptBtn.Active then
            local name, kg, age = getPetInfo(giftUI)
            for keyword, rule in pairs(rules) do
                if name:lower():find(keyword:lower()) then
                    local kgOK = rule.ignoreKg or (kg and kg >= (rule.minKg or 0))
                    local ageOK = rule.ignoreAge or (not age or (age <= (rule.maxAge or math.huge)))
                    if kgOK and ageOK then
                        firesignal(acceptBtn.MouseButton1Click)
                    end
                end
            end
        end
    end
end
